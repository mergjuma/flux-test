## YAML Generation Process
The nginx `upstream-manifests.yaml` manifests file in `bases/nginx-ingress-controller` directory was generated by the following process:

yq version used: > 3.1.1

Kustomize does not have [removal directives](https://github.com/kubernetes-sigs/kustomize/blob/v3.1.0/docs/eschewedFeatures.md#removal-directives) so the following one-liner removes the Namespace creation and removes `spec.replicas` from deployment(for hpa support) before processing via Kustomize
```
for line in `curl -s https://raw.githubusercontent.com/kubernetes/ingress-nginx/nginx-0.30.0/deploy/static/mandatory.yaml | yq r -j -d'*' - | grep -v -e 'kind":"Namespace' -e '"kind":"LimitRange"'`; do echo "---"; echo  $line | yq r --prettyPrint - ;done | yq d - -d'*' 'spec.replicas' > upstream-manifests.yaml
```

Note: When upgrading, please use versioned yamls from upstream git repo e.g. use tag `nginx-0.30.0` in `https://raw.githubusercontent.com/kubernetes/ingress-nginx/nginx-0.30.0/deploy/static/mandatory.yaml`
